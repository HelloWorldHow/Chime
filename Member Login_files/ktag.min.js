!function(){"use strict";function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function i(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(){var t=null;return document.URL?t=document.URL:window.location.href?t=window.location.href:window.location.host&&window.location.pathname&&(t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname)),t}function l(t){return((t=(0<arguments.length&&void 0!==t?t:d()).split("?")[1])?t.split("&"):[]).reduce(function(t,e){e=e.split("=");return t[e[0]]=e[1],t},{})}function g(t,e){var n,r,o,i=[];for(n in t)t.hasOwnProperty(n)&&(r=e?"".concat(e,"[").concat(n,"]"):n,o=t[n],i.push(null!==o&&"object"===a(o)?g(o,r):"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(o))));return i.join("&")}function h(t){var e,n,r=0<arguments.length&&void 0!==t?t:{},o={};for(e in r)r.hasOwnProperty(e)&&(null!==(n=r[e])&&"object"==a(n)?o[e]=h(n):o[e]=encodeURIComponent(n));return o}function m(t){var e=document.createElement("script");e.async=1,e.src=t,(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)}var w={set:function(t,e,n,r){var o;return t?(r=r||{},n&&(o=(new Date).getTime()+1e3*n),window.document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(String(e)),o?"; expires="+new Date(o).toUTCString():"","; path="+(r.path||"/"),r.domain?"; domain="+r.domain:"",window.location&&"https:"===window.location.protocol?"; secure":""].join("")):null},get:function(t,e){return(e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(window.document.cookie))?decodeURIComponent(e[1]):null},delete:function(t,e){w.set(t,null,-1,e)}};function p(){var t=["%cKTag","color: white; background: #24c9a0; padding: 4px"].concat(o(Array.prototype.slice.call(arguments)));console.log.apply(console,t)}function f(t,e){var n=1<arguments.length&&void 0!==e?e:"ktag";try{var r,o=document.currentScript,i=document.querySelector('script[src*="'.concat(n,'.js"]')),a=document.querySelector('script[src*="'.concat(n,'.min.js"]'));if(i)r=i;else if(a)r=a;else{if(!o)return Knotch.debug.reportError(new Error("script not found"));r=o}return r.getAttribute(t)}catch(t){return!1}}function v(t){try{var e=document.querySelector('script[src*="ktag"]')||document.currentScript,n=""===e.getAttribute(t),e="true"===e.getAttribute(t)||"1"===e.getAttribute(t);return n||e}catch(t){return!1}}function b(t){var e=f("src"),t=t&&t.version;e&&-1<e.indexOf("ktag.js")?n=e.indexOf("ktag.js"):-1<e.indexOf("ktag.min.js")?n=e.indexOf("ktag.min.js"):window.ktag.bugsnag.reportError(new Error("knotch script not on page"));var n=e.slice(0,n);return t&&-1!==e.indexOf("latest")&&(n=n.replace("latest",t)),n}function k(){return window.top===window}function y(){var t=!k()&&document.referrer?document.referrer:d();return-1!==Object.keys(l(t)).indexOf("ktag_debug")||v("debug")}function E(t){return t=0<arguments.length&&void 0!==t?t:0,Math.round(100*(t+Number.EPSILON))/100}function x(t){return t=0<arguments.length&&void 0!==t?t:function(){},window.requestAnimationFrame?window.requestAnimationFrame.call(window,t):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame.call(window,t):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame.call(window,t):function(t){window.setTimeout(t,1e3/60)}}function C(t){return/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(t)}function _(t,e,n){window.ktag.bugsnag.pushBreadCrumb({name:"[pixels] Sending Pixel"});var r=new Image(1,1),e=t.url||"".concat(e.ingress,"/ingress.gif?").concat(g(t));!0===n.setCookie&&(t.set_cookie="true"),r.src=e,window.ktag.logEvent({payload:t,method:"pixel",sent:!0})}function O(e,n,t){var r=2<arguments.length&&void 0!==t?t:{};if(window.ktag.bugsnag.pushBreadCrumb({name:"[pixels] Sending Event"}),!(void 0!==e.optout)&&!0!==r.setCookie||(e.set_cookie="true"),D)try{try{!function(t,e){window.ktag.bugsnag.pushBreadCrumb({name:"[pixels] Sending Beacon"});var n=JSON.stringify(h(t));D&&n&&n.length&&(n=D(e.ingress,n),window.ktag.logEvent({payload:t,method:"beacon",sent:n}))}(e,n)}catch(t){_(e,n,r)}}catch(t){window.ktag.bugsnag.reportError(t,{data:e})}else try{_(e,n,r)}catch(t){window.ktag.bugsnag.reportError(t,{data:e})}"production"!==n.env&&p("event sent: ".concat(e.type),e)}function S(t){var e=t.accountId,t={browser_url:T(),root_browser_url:(t=null,window.location.host&&window.location.pathname&&(t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname)),t),canonical_url:function(){var t=document.querySelector("meta[property='og:url']");if(t&&0<t.getAttribute("content").length){var e=t.getAttribute("content");if(C(e))return e}e=document.querySelector("link[rel=canonical]");if(e&&0<e.getAttribute("href").length){var n=e.getAttribute("href");if(C(n))return n}n=document.querySelector("meta[name='canonical']");if(n&&0<n.getAttribute("content").length){n=n.getAttribute("content");if(C(n))return n}return null}(),referrer_url:document.referrer,account_id:e,cs_render_id:window.ktag.renderId,cs_visitor_id:window.ktag.visitorId,time_stamp:Date.now(),session_time_stamp:window.ktag.loadTime,user_agent:window.ktag.userAgent,ktag_version:window.ktag.config.version,platform:window.navigator.platform,language:window.navigator.language,color_depth:window.screen.colorDepth,screen_resolution:(t=window.screen.width*window.devicePixelRatio,e=window.screen.height*window.devicePixelRatio,"".concat(t,"x").concat(e)),time_zone:(t="",window.Intl&&window.Intl.DateTimeFormat&&"function"==typeof window.Intl.DateTimeFormat&&((e=new window.Intl.DateTimeFormat||{}).resolvedOptions&&"function"==typeof e.resolvedOptions&&(t=(e.resolvedOptions()||{timeZone:""}).timeZone)),t),privacy_mode:window.ktag.isPrivacyMode};return document.body&&function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n])}(t,{content_height:document.body.scrollHeight,content_width:document.body.scrollWidth}),t}function I(t){if(!t||!Object.keys(t).length)return!1;var e,n={};for(e in t)-1!==B.indexOf(a(t[e]))&&-1===U.indexOf(e)&&(n[e]=t[e]);return!(1024<JSON.stringify(n).length)&&n}function L(){if(window.URL&&window.URL.createObjectURL){var t=URL.createObjectURL(new Blob);if(t&&0<t.length){t=t.substring(t.lastIndexOf("/")+1);return-1<t.indexOf("blob:")&&(t=t.replace("blob:","")),t}}return window.crypto&&window.crypto.getRandomValues?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e;return"y"===t?(e=["8","9","a","b"])[Math.floor(Math.random()*e.length)]:(e=new Uint8Array(1),window.crypto.getRandomValues(e),(e[0]%16).toString(16))}):null}var A=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints||-1!==navigator.userAgent.indexOf("IEMobile")},T=function(){var t=null;return document.URL?t=document.URL:window.location.href?t=window.location.href:window.location.host&&window.location.pathname&&(t="".concat(window.location.protocol,"//").concat(window.location.host).concat(window.location.pathname)),t},j={set:function(t,e,n,r){var o;return t?(r=r||{},n&&(o=(new Date).getTime()+1e3*n),window.document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(String(e)),o?"; expires="+new Date(o).toUTCString():"","; path="+(r.path||"/"),r.domain?"; domain="+r.domain:"",window.location&&"https:"===window.location.protocol?"; secure":""].join("")):null},get:function(t,e){return(e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(window.document.cookie))?decodeURIComponent(e[1]):null},delete:function(t,e){j.set(t,null,-1,e)}},D=window.navigator&&window.navigator.sendBeacon&&window.navigator.sendBeacon.bind(window.navigator),U=["browser_url","canonical_url","referrer_url","account_id","time_stamp","session_time_stamp","user_agent","ktag_version","content_height","content_width","platform","language","color_depth","screen_resolution","time_zone"],B=["string","number"];function P(t){this.config=t||{},this.url="https://notify.bugsnag.com/js?",this.user={},this.device={},this.startTime=(new Date).getTime(),this.isDebug=y(),this.breadcrumbs=[{name:"Bugsnag Loaded",timestamp:this.startTime,type:"navigation"}]}P.prototype={setUser:function(t){this.user=t},setDevice:function(t){this.device=t},pushBreadCrumb:function(t){t.timestamp=(new Date).getTime(),t.type||(t.type="process"),this.breadcrumbs.push(t),30<this.breadcrumbs.length&&this.breadcrumbs.shift(),this.isDebug&&p(t)},reportError:function(t,e){var n=this.isDebug,r=this.config,o=r.env,r=r.version;"development"===o||"test"===o||n||"development"===r?console.error(t):(e=g(this.payloadData(t,e)),(new Image).src=this.url+e)},payloadData:function(t,e){if(t)return e=e||{},{apiKey:"9cfd033580df1ff429d3aa324d26dded",breadcrumbs:this.breadcrumbs,context:window.location.href,ct:"img",cb:(new Date).getTime(),language:"en-US",message:t.message,metaData:e.data,name:e.name||t.message,notifierVersion:"3.0.7",payloadVersion:"3",releaseStage:this.config.env,severity:e.severity||"error",stacktrace:t.stack,url:window.location.href,user:this.user||e.user,userAgent:navigator.userAgent,appVersion:this.config.version||"dev"}}},self!==top&&(window.bugsnag=new P(window.knotchConfig));function R(t){for(var e="",n=t,r=n&&"BODY"!==n.tagName;null!==n&&n!==document.body&&n!==document;){var o,i="";n.tagName&&(i+=n.tagName.toLowerCase()),n.id&&(i+="#".concat(n.id)),r&&n.className&&(o=n.className.replace(/(\r\n|\n|\r)/gm," "),i+=".".concat(o.split(" ").filter(function(t){return 0<t.length}).join("."))),n=n.parentNode,e=0===e.length?i:"".concat(i,">").concat(e)}return e}function M(t){var e="";return"INPUT"===t.tagName&&"submit"===t.type&&t.value.length?e=t.value:"IFRAME"===t.tagName&&t.title.length?e=t.title:t.textContent&&t.textContent.length&&(e=t.textContent),e.replace(/\s\s+/g," ").trim()}function N(t,e,n){var r=1<arguments.length&&void 0!==e?e:"A",o=2<arguments.length&&void 0!==n?n:3;if(null===t)return null;if(t.tagName===r){var i=!(!t.querySelector||!t.querySelector("img")),e=!!(t.children&&t.children.length<=4),n=!(!t.href||!t.href.length);if(e&&i&&n)return t}return 0===o?null:(--o,N(t.parentElement,r,o))}function F(n){return!Y.reduce(function(t,e){return t||(e=n[e])&&/<\s?[^\>]*\/?\s?>/.test(e)},!1)}function q(r){var e=["A","BUTTON","SVG","SPAN","H1","H2","H3","DIV","IFRAME","OPTION","LABEL","INPUT"],o=[F,function(t){return n=t,Y.reduce(function(t,e){return t||!!n[e]},!1);var n},function(t){return-1<e.indexOf(t.tagName)},function(t){return("number"==typeof(t=t).childElementCount?t.childElementCount:t.children&&"number"==typeof t.children.length?t.children.length:0)<5},function(t){return M(t).length<=150},function(t){return"INPUT"!==t.tagName||"INPUT"===t.tagName&&"submit"===t.type}];return o.reduce(function(t,e,n){return t&&o[n](r)},!0)}var V,z,H,Y=["textContent","className","id","href","value"],X=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints||-1!==navigator.userAgent.indexOf("IEMobile")},Z=function(){function o(t){var e=this,n=t.callback,r=t.isInteractionsDebug,r=void 0!==r&&r,t=t.privacyMode,t=void 0!==t&&t;c(this,o),this.callback=n,this.start={x:0,y:0},this.isMobile=X(),this.hoverElem={},this.privacyMode=t,this.isMobile?(document.addEventListener("touchstart",function(t){return e.touchStart(t)}),document.addEventListener("touchend",function(t){return e.touchEnd(t)})):(document.addEventListener("click",function(t){return e.handleClick(t)}),document.addEventListener("auxclick",function(t){return e.handleClick(t)})),r&&(document.addEventListener("mouseover",function(t){return e.handleHover(t)}),document.addEventListener("mouseout",function(t){return e.handleExitHover(t)})),window.addEventListener("blur",function(){setTimeout(function(){"IFRAME"===document.activeElement.tagName&&e.handleClick({target:document.activeElement,pageX:document.activeElement.offsetLeft,pageY:document.activeElement.offsetTop})})})}return t(o,[{key:"touchStart",value:function(t){t=this.getTouch(t);t&&(this.start={x:t.screenX,y:t.screenY})}},{key:"getTouch",value:function(t){return t.changedTouches?t.changedTouches[0]:!!t.touches&&t.touches[0]}},{key:"touchEnd",value:function(t){var e=this.getTouch(t),n=e&&Math.abs(e.screenX-this.start.x)<10,r=e&&Math.abs(e.screenY-this.start.y)<10;n&&r&&this.handleClick(t,e)}},{key:"checkValidText",value:function(t){if(this.privacyMode)return"";var e=M(t);return!(t=e)||-1!==t.indexOf("@")?"":function(t){t=0<arguments.length&&void 0!==t?t:"";return t.length&&t.replace?t.replace(/\d/g,"*"):t}(e)}},{key:"handleClick",value:function(t,e){var n,r=t.target,o=N(r,"A",3)||r;!q(o)||-1===(n=R(o)).indexOf("#knotch-debugger")&&(r=this.checkValidText(o),t={type:"content_interaction",interaction_type:"click",target_class:o.className,target_id:o.id,target_text:r,target_path:n,target_url:"IFRAME"===(o=o).tagName&&o.src?o.src:"A"===o.tagName&&o.href?o.href:"",target_x:this.isMobile?e.screenX:t.pageX,target_y:this.isMobile?e.screenY:t.pageY},this.callback(t))}},{key:"handleHover",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).target,n=N(e,"A",3)||e,t=q(n),e=R(n);t&&n&&n.style&&-1===e.indexOf("#knotch-debugger")&&(e=n.style,this.hoverElem.element=n,this.hoverElem.prevStyle=e,n.style.border="4px solid #D79DFF",n.style.boxShadow="0px 0px 44px 10px rgba(215, 157, 255, 0.6)",n.style.cursor="pointer")}},{key:"handleExitHover",value:function(t){t=0<arguments.length&&void 0!==t?t:{};this.hoverElem.element&&t.target===this.hoverElem.element&&(this.hoverElem.element.style=this.hoverElem.prevStyle)}}]),o}(),J=function(){function e(t){t=t.callback;c(this,e),this.currentUrl=T(),this.callback=t,this.isMobile=A(),this.init()}return t(e,[{key:"init",value:function(){try{window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] initializing SPATracker"}),this.clickTracker=this.initClickTracker(),this.scrollTracker=this.initInfiniteScrollTracking(),window.history&&window.history.pushState?this.historyTracker=this.initHistoryTracker():window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] cannot initialize historyTracker in SPATracker"})}catch(t){window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] cannot initialize SPATracker"}),window.ktag.bugsnag.reportError(t)}}},{key:"disable",value:function(){window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] Disabling SPATracker"});try{this.scrollTracker(),this.clickTracker(),this.historyTracker()}catch(t){window.ktag.bugsnag.reportError(t)}}},{key:"initClickTracker",value:function(){var t=this;try{window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] initializing click tracking"});var e=function(){return x(function(){return t.checkUrlChange("touch")})},n=function(){return x(function(){return t.checkUrlChange("click")})};return this.isMobile?(window.document.addEventListener("touchend",e),function(){window.document.removeEventListener("touchend",e)}):(window.document.addEventListener("click",n),window.document.addEventListener("auxclick",n),function(){window.document.removeEventListener("click",n),window.document.removeEventListener("auxclick",n)})}catch(t){window.ktag.bugsnag.reportError(t)}}},{key:"initHistoryTracker",value:function(){var t=this;try{window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] initializing history tracking"});var e=function(){return x(function(){return t.checkUrlChange("history")})};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}catch(t){window.ktag.bugsnag.reportError(t)}}},{key:"initInfiniteScrollTracking",value:function(){var n,r,o,t=this;try{window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] initializing scroll tracking"});var e=(n=function(){x(function(){t.checkUrlChange("scroll")})},r=500,function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){n.apply(t,e)},r)});return window.document.addEventListener("scroll",e),function(){window.document.removeEventListener("scroll",e)}}catch(t){window.ktag.bugsnag.reportError(t)}}},{key:"checkUrlChange",value:function(t){var e=0<arguments.length&&void 0!==t?t:"history",t=T();this.currentUrl!==t&&(window.ktag.bugsnag.pushBreadCrumb({name:"[spa tracker] Url has changed on ".concat(e),metaData:{previousUrl:this.currentUrl,url:t,isMobile:this.isMobile}}),this.currentUrl=t,this.callback())}}]),e}(),K={sendCustomEvent:function(t){window.ktag.bugsnag.pushBreadCrumb({name:"[public api] Sending custom event"}),"object"===a(t)&&I(t)&&window.ktag.trackEvent(t)},sendPageView:function(){window.ktag.bugsnag.pushBreadCrumb({name:"[public api] Virtual page view"});var t=L();t&&(window.ktag.bugsnag.pushBreadCrumb({name:"[public api] Updating cs_render_id"}),window.ktag.renderId=t),window.ktag.trackEvent({type:"page_view"})}},$={setCustomVars:function(t){"object"===a(t)&&I(t)&&window.ktag.dataLayer.push(t)},setDataLayer:function(t){window.ktag&&window.ktag.setCustomVars(t)}},G={disableEagerTracking:function(){var t;window.ktag.bugsnag.pushBreadCrumb({name:"[public api] disabling eager tracking"}),window.ktag&&window.ktag.trackers.length&&((t=window.ktag.trackers.find(function(t){return"spa"===t.type}))&&t.tracker&&t.tracker.disable&&t.tracker.disable())}},W=i(i(i(i({},{checkOptout:function(){var t=w.get("knotch_optout");"0"===t?this.setOptout(!0):this.optedOut="1"===t},setOptout:function(t){if("boolean"!=typeof t)return console.warn("[Knotch#setOptout] Please pass in a boolean value (true/false)");t?(this.bugsnag.pushBreadCrumb({name:"[public API] Opted out!"}),w.set("knotch_optout",1,31536e3),this.deleteVisitorCookies(),this.optedOut=!0,this.sendCustomEvent({type:"optout_requested",optout:"1"})):(this.bugsnag.pushBreadCrumb({name:"[public API] Opted in!"}),w.delete("knotch_optout"),this.optedOut=!1,this.sendCustomEvent({type:"optin_requested",optout:"0"}))},deleteVisitorCookies:function(){w.delete("kn_cs_visitor_id")}}),K),$),G),Q={page:"pagetracker.min.js",content:"contenttracker.min.js",feedback_card:"FeedbackCard.min.js",debugger:"debugger.min.js"};if(!window.ktag){var tt=new P({env:"production",ingress:"https://aq-swa-api.knotch.it",accountConfig:"https://units.knotch.it/ktag-config",version:"v1.3.5",measurementCard:"measurementCard.min.js",theme:"https://units.knotch.it/themes",deliveryEngine:"https://delivery.knotch.it/",proFE:"https://nextgen.knotch.it/",ktag:"https://www.knotch-cdn.com/ktag/latest/ktag.min.js"});try{window.ktag=i(i({},W),{},{dataLayer:[],trackers:[],loadTime:Date.now(),accountId:function(){var t=f("src");if(!t||!t.length)return null;t=n(t.split("?"),2),t[0],t=t[1];if(!t||!t.split("=").length)return null;t=n(t.split("="),2),t[0],t=t[1];return t||null}(),renderId:L(),userAgent:"".concat(navigator.userAgent),config:{env:"production",ingress:"https://aq-swa-api.knotch.it",accountConfig:"https://units.knotch.it/ktag-config",version:"v1.3.5",measurementCard:"measurementCard.min.js",theme:"https://units.knotch.it/themes",deliveryEngine:"https://delivery.knotch.it/",proFE:"https://nextgen.knotch.it/",ktag:"https://www.knotch-cdn.com/ktag/latest/ktag.min.js"},bugsnag:tt,isDemo:(z=v("demo"),H="true"===w.get("knotch_demo"),!(!z&&!H)),isDebug:y(),isInteractionsDebug:(V=!k()&&document.referrer?document.referrer:d(),-1!==Object.keys(l(V)).indexOf("ktag_interactions_debug")),isPrivacyMode:!!v("privacy"),eventLog:[],performanceEnabled:!1,performance:{data:null,processed:!1},init:function(){var t,e,n,r=this;try{if(window.ktag.bugsnag.pushBreadCrumb({name:"[ktag] initializing"}),this.checkForPerformance(),this.performanceEnabled&&window.performance.mark("ktag-start-init"),!this.accountId)return this.bugsnag.reportError("no account id provided in the script source");this.checkOptout(),this.optedOut||(this.visitorId=(e="kn_cs_visitor_id",(n=j.get(e))||(t=L(),j.set(e,t,31536e3),n=j.get(e)),n)),(this.isDebug||this.isInteractionsDebug)&&this.injectSubmodule("debugger"),window.kCustomVars&&window.kCustomVars instanceof Array&&(this.dataLayer=[].concat(o(this.dataLayer),o(window.kCustomVars))),this.performanceEnabled&&window.performance.mark("ktag-page-view"),this.trackEvent({type:"page_view"},{setCookie:!0}),this.getAccountConfig(),function(t){function n(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e)):(document.detachEvent("onreadystatechange",e),window.detachEvent("onload",e))}var r=!1,e=function(){r||!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(r=!0,n(),t())};if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState||document.body)t();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e);else{document.attachEvent("onreadystatechange",e),window.attachEvent("onload",e);var o=!1;try{o=null==window.frameElement&&document.documentElement}catch(t){}o&&o.doScroll&&!function e(){if(!r){try{o.doScroll("left")}catch(t){return setTimeout(e,50)}r=!0,n(),t()}}()}}(function(){var t=new J({callback:function(){return window.ktag.sendPageView()}});r.trackers.push({type:"spa",tracker:t});var t=new Z({callback:function(t){return window.ktag.trackEvent(t)},isInteractionsDebug:r.isInteractionsDebug,privacyMode:r.isPrivacyMode});r.trackers.push({type:"interaction",tracker:t}),(t=document.querySelector('[class*="kn_cs_render_id"]'))&&(window.ktag.bugsnag.pushBreadCrumb({name:"Hidden kn_cs_render_id field found"}),(t=t.querySelector('[type="hidden"]'))&&window.ktag.renderId&&(t.setAttribute("value",window.ktag.renderId),window.ktag.bugsnag.pushBreadCrumb({name:"Hidden kn_cs_render_id field set"})))}),this.performanceEnabled&&window.performance.mark("ktag-end-init"),window.ktag.bugsnag.pushBreadCrumb({name:"[ktag] finished init"})}catch(t){this.bugsnag.reportError(t)}},trackEvent:function(t,e){try{var n,r,o;t&&this.Debugger&&this.Debugger.handleEvent(t),t&&!this.isDemo&&(n=encodeURIComponent(JSON.stringify(this.processDataLayer())),o=i(i({},S({accountId:this.accountId,config:this.config})),t),!this.performanceEnabled||(r=(r=this.processLoadStats())&&encodeURIComponent(JSON.stringify(r)))&&r.length&&(o.load_data=r),this.dataLayer.length&&(o.custom_json=n),O(o,this.config,e),this.isInteractionsDebug&&(o=new Event("ktag_interaction_event"),window.dispatchEvent(o)))}catch(t){this.bugsnag.reportError(t)}},checkForPerformance:function(){window.performance&&window.performance.mark&&window.performance.measure&&window.performance.getEntriesByName?this.performanceEnabled=!0:window.ktag.bugsnag.pushBreadCrumb({name:"[performance load stats] performance API unavailable"})},processLoadStats:function(){try{if(this.performanceEnabled){if(this.performance.processed&&this.performance.data)return this.performance.data;var t;window.ktag.bugsnag.pushBreadCrumb({name:"[performance load stats] Starting performance marks"});var e=performance.getEntriesByType("mark");if(!e||e&&!e.length)return window.ktag.bugsnag.pushBreadCrumb({name:"[performance load stats] Failed to generate - no marks available"}),this.performanceEnabled=!1,null;var n=e.length&&e.find(function(t){return"ktag-page-view"===t.name}),r=e.length&&e.find(function(t){return"ktag-start-init"===t.name}),e=e.length&&e.find(function(t){return"ktag-end-init"===t.name});if(!n||!r)return window.ktag.bugsnag.pushBreadCrumb({name:"[performance load stats] Missing mark(s), exiting: ".concat(!n&&"page view mark"," ").concat(!r&&"init start mark")}),null;n=window.performance.measure("ktag-total-init-time","ktag-start-init","ktag-page-view");e&&(t=window.performance.measure("ktag-total-init-time","ktag-start-init","ktag-end-init"));r=this.config.ktag,e=this.accountId,r="".concat(r,"?accountId=").concat(e),e=performance.getEntriesByName(r),r=e&&e.length&&e[0],e=null;return n&&r?e=i(i({load_time:E(r.duration)},n&&{time_to_page_view:E(n.duration)}),t&&{total_init_time:E(t.duration)}):window.ktag.bugsnag.pushBreadCrumb({name:"[performance load stats] Missing measure(s), exiting: ".concat(!n&&"time to first page view"," ").concat(!r&&"init script load time")}),e&&!t?this.performance.data=e:e&&e.total_init_time&&!this.performance.processed&&(this.performance.processed=!0,this.performance.data=e,this.isDebug&&p("load data processed:",e)),e}return null}catch(t){return window.ktag.bugsnag.pushBreadCrumb({name:"[performance load stats] Failed to generate"}),this.bugsnag.reportError(t),null}},handleIFrameEvents:function(t){var e=t.data,t=e.data;"knotchEvent"===e.eventType&&this.trackEvent(t)},processDataLayer:function(){return Array.isArray(this.dataLayer)&&this.dataLayer.length?this.dataLayer.reduce(function(t,e){e=I(e);return e?i(i({},t),e):t},{}):(this.isDebug&&console.warn("Invalid dataLayer"),null)},getAccountConfig:function(){var t={page:{disabled:["demographics","firmographics"]},content:{disabled:["crawling"]},modules:[],accountId:this.accountId,feedback_card:{disabled:[]}};this.accountConfig=t,this.injectModules(t)},injectModules:function(t){var n=this;t&&t.modules&&t.modules.map(function(t){var e=b({version:n.config.version})+Q[t];Q[t]&&m(e)})},injectSubmodule:function(t){!Q[t]||(t=b({version:this.config.version})+Q[t])&&m(t)},lastEvent:function(){return this.eventLog&&this.eventLog.length?this.eventLog[this.eventLog.length-1]:{}},logEvent:function(t){this.eventLog&&this.eventLog.push(t)}})}catch(t){tt.reportError(t)}window.ktag.init()}}();
